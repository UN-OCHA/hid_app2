<h1 translate>Create a new service</h1>
<form name="editService" ng-submit="editService.$valid && saveService()" novalidate>
  <div class="form-group" ng-class="{'has-error': editService.name.$touched && editService.name.$invalid}">
    <label for="name" translate>Name</label>
    <input type="text" name="name" class="form-control" id="name" placeholder="{{'The service name'|translate}}" ng-model="service.name" required>
    <div class="clearfix">
      <div ng-messages="editService.name.$error" ng-show="editService.name.$touched" ng-messages-multiple="ng-messages-multiple">
        <div ng-messages-include="app/common/messages.html"></div>
      </div>
    </div>
  </div>
  <div class="form-group">
    <label for="description" translate>Description</label>
    <textarea ng-model="service.description" class="form-control" name="description" rows="5" cols="20"></textarea>
  </div>
  <fieldset class="form-group">
    <legend translate>Service Type</legend>
    <p ng-repeat="option in serviceTypes">
      <input type="radio" id="service-type-{{option.value}}" name="visibility" ng-model="service.type" value="{{option.value}}" />
      <label class="clickie-label" for="service-type-{{option.value}}" required translate>{{option.label}}</label>
    </p>
  </fieldset>
  <div class="form-group" ng-show="service.type === 'mailchimp'">
    <label for="mailchimp-api-key" translate>Mailchimp API key</label>
    <input type="text" name="name" class="form-control" id="mailchimp-api-key" placeholder="{{'Mailchimp API Key'|translate}}" ng-model="service.mailchimp.apiKey" ng-required="service.type === 'mailchimp'" ng-blur="getMailchimpLists()">
  </div>
  <div class="form-group" ng-if="service.type === 'mailchimp' && service.mailchimp.apiKey" ng-init>
    <label for="mailchimpList" translate>Mailchimp list</label>
    <select name="mailchimpList" ng-model="service.mailchimp.list" ng-options="list.name for list in mailchimpLists track by list.id">
    </select>
  </div>
  <div class="form-group" ng-if="service.type === 'googlegroup'" ng-init>
    <label for="ggDomain" translate>Domain</label>
    <select name="ggDomain" ng-model="service.googlegroup.domain" ng-blur="getGoogleGroups()">
      <option ng-repeat="cred in credentials" ng-value="cred.googlegroup.domain">{{cred.googlegroup.domain}}</option>
    </select>
  </div>
  <div class="form-group" ng-if="service.type === 'googlegroup' && service.googlegroup.domain" ng-init>
    <label for="googleGroup" translate>Group</label>
    <select name="googleGroup" ng-model="service.googlegroup.group" ng-options="group.name for group in googleGroups track by group.id">
    </select>
  </div>
  <div class="form-group">
    <label><input type="checkbox" ng-model="service.hidden" name="hidden" /> Hidden</label>
  </div>

  <button type="submit" class="btn btn-primary" ng-disabled="editService.$invalid || editService.$submitted" translate>Save</button>
</form>
