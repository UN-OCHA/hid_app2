<div class="list-actions">
  <p class="list-actions__count">{{totalItems}} <span translate>contacts</span></p>

  <ul class="pagination list-actions__pagination">
    <li class="pagination-page"><span>Show</span></li>
    <li class="pagination-page" ng-class="{'active' : itemsPerPage === 50}">
      <button type="button" ng-click="setLimit(50)" ng-disabled="!isOnline">50</button>
    </li>
    <li class="pagination-page" ng-class="{'active' : itemsPerPage === 100}">
      <button type="button" ng-click="setLimit(100)" ng-disabled="!isOnline">100</button>
    </li>
    <li class="pagination-page" ng-class="{'active' : itemsPerPage === 150}">
      <button type="button" ng-click="setLimit(150)" ng-disabled="!isOnline">150</button>
    </li>
    <li class="pagination-page" ng-class="{'active' : itemsPerPage === 200}">
      <button type="button" ng-click="setLimit(200)" ng-disabled="!isOnline">200</button>
    </li>
  </ul>

</div>

<button class="btn-icon page-actions__toggle-filters" ng-class="{'page-actions__toggle-filters--has-admin' : showAdmin}" type="button" ng-click="toggleSidebar('userFilters')">
  <icon name="filter" text="Filter"></icon>
</button>

<ng-include src="'app/components/user/user-filters.html'"></ng-include>

<table class="table table-responsive table-responsive--has-actions">
  <thead>
    <tr>
      <th ng-click="sortList('name')" translate>Name</th>
      <th ng-click="sortList('role')" translate>Role</th>
      <th ng-click="sortList('organization')" translate>Organization</th>
      <th ng-click="sortList('cluster')" translate>Cluster</th>
      <th ng-click="sortList('country')" translate>Country</th>
      <th translate><span class="sr-only">Info / actions</span></th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="user in users">
      <td><a ng-href="/users/{{user._id}}">{{user.name}}</a></td>
      <td>{{user.job_title}}</td>
      <td>{{user.organization.list.name}}</td>
      <td></td>
      <td>{{user.location.country.name}}</td>
      <td>
        <icon name="flag" text="List owner" title="List owner" class="icon-inline" ng-if="list && list.owner._id == user._id"></icon>
        <icon name="clock-o" text="Pending" title="Pending" class="icon-inline" ng-if="list && user.currentCheckin(list).pending"></icon>
        <icon name="user" text="List manager" title="List manager" class="icon-inline" ng-if="list && list.isManager(user)" title="Manager"></icon>
        <icon name="check-circle" text="Verified" title="Verified" class="icon-inline" ng-if="user.verified"></icon>

        <div uib-dropdown class="icon-inline">
          <button type="button" class="btn-transparent" data-animation="am-flip-x" uib-dropdown-toggle aria-haspopup="true" aria-expanded="false" title="Edit" ng-disabled="!isOnline">
            <icon name="ellipsis-v" text="Edit"></icon>
          </button>
          <ul class="dropdown-menu" uib-dropdown-menu>
            <li ng-if="currentUser.is_admin"><a href="/checkin/{{user._id}}" translate>Check into List</a></li>
            <li ng-if="list && list.isManager(user) && (currentUser.is_admin || list.owner._id == currentUser._id || isManager)"><a href ng-click="demoteManager(user);" translate>Demote from Manager</a></li>
            <li ng-if="list && !list.isManager(user) && (currentUser.is_admin || list.owner._id == currentUser._id || isManager)"><a href ng-click="promoteManager(user);" translate>Promote to Manager</a></li>
            <li ng-if="list && user.currentCheckin(list).pending && (currentUser.is_admin || list.owner.id == currentUser.id || isManager)"><a href ng-click="approveUser(user);" translate>Approve user</a></li>
            <li ng-if="list && (currentUser.is_admin || list.owner._id == currentUser._id || isManager)"><a href ng-click="removeFromList(user);" translate>Remove from list</a></li>
            <li ng-if="currentUser.is_admin"><a href ng-click="deleteUser(user);" translate>Delete Account</a></li>
          </ul>
        </div>
      </td>
    </tr>
  </tbody>
</table>
<ul uib-pagination boundary-link-numbers="true" total-items="totalItems" items-per-page="itemsPerPage" max-size="10" ng-model="currentPage" ng-change="pageChanged()" class="pagination" direction-links="false"></ul>
