<div class="profile-alert" ng-class="{'profile-alert--show': saving.show}">
<div class="profile-alert__inner profile-alert__inner--{{saving.status}}" >
  <div ng-if="saving.status === 'saving'">
    <?xml version="1.0" encoding="utf-8"?><svg width='28px' height='28px' xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="uil-ring"><rect x="0" y="0" width="100" height="100" fill="none" class="bk"></rect><defs><filter id="uil-ring-shadow" x="-100%" y="-100%" width="300%" height="300%"><feOffset result="offOut" in="SourceGraphic" dx="0" dy="0"></feOffset><feGaussianBlur result="blurOut" in="offOut" stdDeviation="0"></feGaussianBlur><feBlend in="SourceGraphic" in2="blurOut" mode="normal"></feBlend></filter></defs><path d="M10,50c0,0,0,0.5,0.1,1.4c0,0.5,0.1,1,0.2,1.7c0,0.3,0.1,0.7,0.1,1.1c0.1,0.4,0.1,0.8,0.2,1.2c0.2,0.8,0.3,1.8,0.5,2.8 c0.3,1,0.6,2.1,0.9,3.2c0.3,1.1,0.9,2.3,1.4,3.5c0.5,1.2,1.2,2.4,1.8,3.7c0.3,0.6,0.8,1.2,1.2,1.9c0.4,0.6,0.8,1.3,1.3,1.9 c1,1.2,1.9,2.6,3.1,3.7c2.2,2.5,5,4.7,7.9,6.7c3,2,6.5,3.4,10.1,4.6c3.6,1.1,7.5,1.5,11.2,1.6c4-0.1,7.7-0.6,11.3-1.6 c3.6-1.2,7-2.6,10-4.6c3-2,5.8-4.2,7.9-6.7c1.2-1.2,2.1-2.5,3.1-3.7c0.5-0.6,0.9-1.3,1.3-1.9c0.4-0.6,0.8-1.3,1.2-1.9 c0.6-1.3,1.3-2.5,1.8-3.7c0.5-1.2,1-2.4,1.4-3.5c0.3-1.1,0.6-2.2,0.9-3.2c0.2-1,0.4-1.9,0.5-2.8c0.1-0.4,0.1-0.8,0.2-1.2 c0-0.4,0.1-0.7,0.1-1.1c0.1-0.7,0.1-1.2,0.2-1.7C90,50.5,90,50,90,50s0,0.5,0,1.4c0,0.5,0,1,0,1.7c0,0.3,0,0.7,0,1.1 c0,0.4-0.1,0.8-0.1,1.2c-0.1,0.9-0.2,1.8-0.4,2.8c-0.2,1-0.5,2.1-0.7,3.3c-0.3,1.2-0.8,2.4-1.2,3.7c-0.2,0.7-0.5,1.3-0.8,1.9 c-0.3,0.7-0.6,1.3-0.9,2c-0.3,0.7-0.7,1.3-1.1,2c-0.4,0.7-0.7,1.4-1.2,2c-1,1.3-1.9,2.7-3.1,4c-2.2,2.7-5,5-8.1,7.1 c-0.8,0.5-1.6,1-2.4,1.5c-0.8,0.5-1.7,0.9-2.6,1.3L66,87.7l-1.4,0.5c-0.9,0.3-1.8,0.7-2.8,1c-3.8,1.1-7.9,1.7-11.8,1.8L47,90.8 c-1,0-2-0.2-3-0.3l-1.5-0.2l-0.7-0.1L41.1,90c-1-0.3-1.9-0.5-2.9-0.7c-0.9-0.3-1.9-0.7-2.8-1L34,87.7l-1.3-0.6 c-0.9-0.4-1.8-0.8-2.6-1.3c-0.8-0.5-1.6-1-2.4-1.5c-3.1-2.1-5.9-4.5-8.1-7.1c-1.2-1.2-2.1-2.7-3.1-4c-0.5-0.6-0.8-1.4-1.2-2 c-0.4-0.7-0.8-1.3-1.1-2c-0.3-0.7-0.6-1.3-0.9-2c-0.3-0.7-0.6-1.3-0.8-1.9c-0.4-1.3-0.9-2.5-1.2-3.7c-0.3-1.2-0.5-2.3-0.7-3.3 c-0.2-1-0.3-2-0.4-2.8c-0.1-0.4-0.1-0.8-0.1-1.2c0-0.4,0-0.7,0-1.1c0-0.7,0-1.2,0-1.7C10,50.5,10,50,10,50z" fill="#007faa" filter="url(#uil-ring-shadow)"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" repeatCount="indefinite" dur="1s"></animateTransform></path></svg>
    <span translate>Saving</span>
  </div>
  <div ng-if="saving.status !== 'saving'">
    <icon name="check"></icon>
    {{saving.message}}
  </div>
</div>
</div>
<div class="sidebar collapse" ng-class="{'in' : sidebar.open}">
  <div class="sidebar__inner">
    <h2 class="sidebar__heading" translate>User admin</h2>

    <button type="button" class="btn btn-transparent sidebar__close" ng-click="closeSidebar()">
      <icon name="cancel" text="close"></icon>
    </button>

    <div class="sidebar-section">

      <button type="button" ng-click="verifyUser()" class="btn-primary btn-block" ng-show="currentUser.is_admin">
        <span ng-if="!user.verified" translate>Verify user</span>
        <span ng-if="user.verified" translate>Un-verify user</span>
      </button>

      <a class="btn-primary btn-block" href="/checkin/{{user._id}}" ng-show="(currentUser.is_admin || (currentUser._id == user._id)) && isOnline">
        <icon name="check"></icon>
        <span translate>Check into List</span>
      </a>

      <button class="btn-primary btn-block" ng-click="exportVcard();">
        <icon name="inbox-download"></icon>
        <span translate>Export Contact Info</span>
      </button>

      <button class="btn-primary btn-block" ng-click="sendClaimEmail();" ng-disabled="!isOnline" ng-show="user.is_orphan">
        <icon name="mail-envelope-closed"></icon>
        <span translate>Send Claim Email</span>
      </button>

      <button class="btn-primary btn-block" ng-disabled="!isOnline" ng-click="notify()">
        <icon name="flag"></icon>
        <span translate>Report a Problem</span>
      </button>

    </div>
  </div>
</div>

<form editable-form name="profileForm" onaftersave="saveUser()" class="form">

  <div class="page-header profile-header">

    <div class="profile-header__primary" ng-class="{'active' : profileForm.$visible}">

      <div class="profile-header__image">

        <icon name="check-circle" text="Verfied" ng-show="user.verified"></icon>

        <img ng-src="{{pictureUrl}}" class="img-thumbnail" alt="">

      </div>

      <div class="profile-header__content">
        <div ng-if="!profileForm.$visible">
          <h1 class="page-header__heading">
            {{user.given_name}} {{user.family_name}}
          </h1>

          <ul class="profile-header__info"  ng-if="!profileForm.$visible">
            <li ng-if="user.organization && user.organization.list"><icon name="home"></icon> {{user.organization.list.acronym || user.organization.list.name}}</li>
            <li><icon name="user"></icon> Cluster</li>
            <li><icon name="map-pin"></icon></i> {{user.location.country.name}}</li>
          </ul>

          <p class="profile-header__status">{{user.status}}</p>
        </div>

        <div ng-if="profileForm.$visible">
          <label for="given_name" class="sr-only" translate>Given name</label>
          <input type="text" id="given_name" ng-model="user.given_name" ng-model-options="{debounce: 1000}" ng-change="updateUser(user.given_name)" />

          <label for="family_name" class="sr-only" translate>Family name</label>
          <input type="text" id="family_name" ng-model="user.family_name" ng-model-options="{debounce: 1000}" ng-change="updateUser(user.family_name)" />

          <label for="user_status" class="sr-only" translate>Status</label>
          <textarea id="user_status" ng-model="user.status" ng-model-options="{debounce: 1000}" ng-change="updateUser(user.status)"></textarea>
        </div>


         <!--  <span editable-text="user.given_name" e-id="given_name" e-placeholder="{{'Given name' | translate}}" >{{user.given_name}}</span>
          <label ng-if="profileForm.$visible" for="family_name" class="sr-only">Family name</label>
          <span editable-text="user.family_name" e-id="family_name" e-placeholder="{{'Family name' | translate}}">{{user.family_name}}</span> -->




        <!-- <label ng-if="profileForm.$visible" for="user_status" class="sr-only" translate="">User status</label>
        <p editable-textarea="user.status" e-id="user_status" e-rows="7" e-cols="40" e-placeholder="{{'Status' | translate}}" class="hidden-sm-up profile-header__status">{{user.status}}</p> -->

        <div ng-show="profileForm.$visible">
          <label class="btn btn-secondary btn-upload center-block" upload-button url="{{config.apiUrl}}user/{{user._id}}/picture" accept="image/jpeg" on-success="onUploadSuccess(response)" on-error="onUploadError(response)">Upload new Picture</label>
          <p class="form-hint" translate>Upload a square image in JPEG format, with more than 200px width</p>
        </div>

        <div class="profile-header__controls">
          <button type="button" class="btn-icon" ng-click="profileForm.$show()" ng-show="!profileForm.$visible && canEditUser" ng-disabled="!isOnline">
            <icon name="edit" text="Edit"></icon>
          </button>

          <div ng-show="profileForm.$visible">
            <button type="button" class="btn-icon btn-secondary" ng-disabled="profileForm.$waiting" ng-click="profileForm.$hide()">
              <icon name="cancel" text="Cancel"></icon>
            </button>
          </div>
        </div>

      </div>
    </div>

    <button class="btn-icon page-actions__toggle-admin" type="button" ng-click="toggleSidebar('admin')">
      <icon name="wheel" text="Actions"></icon>
    </button>

  </div>


  <div class="row">

    <div class="col-xs-12 col-md-6 col-lg-4">
      <h2 class="block-heading" translate>Contact Information</h2>

      <div class="form-editable-section" ng-if="!profileForm.$visible">
        <h3 translate>Phone numbers</h3>
        <ul class="form-list">
          <li class="form-list__item" ng-repeat="phone in user.phone_numbers">
            <a ng-href="tel:{{phone.number}}">{{phone.number}}</a>
            <icon name="star" text="Primary" title="Primary" ng-if="user.phone_number === phone.number"></icon>
            <span class="form-list__item-meta">{{phone.type}}</span>
          </li>
          <li ng-if="!user.phone_numbers.length"><em translate>No phone numbers</em></li>
        </ul>
      </div>

      <div class="form-editable-section" ng-if="profileForm.$visible" ng-class="{'active': profileForm.$visible}">
        <fieldset class="form-group" ng-if="user.phone_numbers.length">
          <legend translate>Set primary phone number:</legend>
          <ul class="form-list">
            <li class="form-list__item" ng-repeat="phone in user.phone_numbers">
              <span class="form-list__text">
                <input type="radio"
                id="phone-{{phone._id}}"
                name="phoneNumbers"
                ng-model="user.phone_number"
                ng-value="phone.number"
                ng-change="setPrimaryPhone(phone)"
                />
                <label class="clickie-label" for="phone-{{phone._id}}">
                  {{phone.number}}
                  <span class="form-list__item-meta">{{phone.type}}</span>
                </label>
              </span>
              <button type="button" class="btn-transparent" ng-show="phone.number !== user.phone_number" ng-click="dropItem('phone_number', phone)"><icon name="cancel" text="Remove phone number"></icon></button>
            </li>
          </ul>

        </fieldset>

        <fieldset>
          <legend translate>Add phone number</legend>
          <div class="form-list__item">
            <label for="new_phone_number" class="sr-only">Phone type:</label>
            <div class="styled-select">
              <select ng-model="temp.phone_number.type" ng-options="t.value as t.name for t in phoneNumberTypes" id="new_phone_number"><option value="" disabled selected>Type</option></select>
            </div>
          </div>
          <div class="form-list__item">

            <bc-phone-number name="phone_number" label="Phone number" ng-model="temp.phone_number.number" is-valid="isValidPhoneNumber" ng-class="{'has-error': temp.phone_number.number && !isValidPhoneNumber, 'has-success': temp.phone_number.number && isValidPhoneNumber}"></bc-phone-number>

            <button type="button" class="btn-transparent" ng-click="addItem('phone_number')">
              <icon name="plus" text="Add"></icon>
            </button>
          </div>
        </fieldset>

      </div>

      <div class="form-editable-section" ng-if="!profileForm.$visible">
        <h3 translate>Emails</h3>
        <ul class="form-list">
          <li class="form-list__item" ng-repeat="email in user.emails">
            <a ng-href="mailto:{{email.email}}">{{email.email}}</a>
            <icon name="star" text="Primary" title="Primary" ng-if="user.email === email.email"></icon>
            <span class="form-list__item-meta" ng-if="!email.validated" translate> Unverified</span>
            <span class="form-list__item-meta">{{email.type}}</span>
          </li>
        </ul>
      </div>

      <div class="form-editable-section" ng-class="{'active': profileForm.$visible}" ng-if="profileForm.$visible">

        <fieldset class="form-group" ng-if="user.emails.length">
          <legend translate>Set primary email:</legend>

          <ul class="form-list">
            <li class="form-list__item" ng-repeat="email in user.emails">
              <span class="form-list__text">
                <input
                type="radio"
                id="email-{{email._id}}"
                name="emails"
                ng-model="user.email"
                ng-value="email.email"
                ng-disabled="!email.validated"
                ng-change="setPrimaryEmail(email.email)" />
                <label class="clickie-label" for="email-{{email._id}}">
                  {{email.email}}
                  <span ng-if="!email.validated" class="form-list__item-meta">
                    <span translate>Unverified</span> -
                    <button type="button" class="btn-link" ng-click="resendValidationEmail(email.email)" translate>resend validation email</button>
                  </span>
                  <span class="form-list__item-meta">{{email.type}}</span>
                </label>
              </span>
              <button type="button" class="btn-transparent" ng-click="dropItem('email', email)" ng-if="email.email != user.email"><icon name="cancel" text="Remove"></icon></button>
            </li>
          </ul>
        </fieldset>

        <fieldset>
          <legend translate>Add email</legend>
          <div class="form-list__item">
            <label for="new_email_type" class="sr-only" translate>Email type</label>
            <div class="styled-select">
              <select id="new_email_type" ng-model="temp.email.type" ng-options="t.value as t.name for t in emailTypes" class="form-control">
                <option value="" disabled selected>Type</option>
              </select>
            </div>
          </div>
          <div class="form-list__item">
            <label for="new_email" class="sr-only" translate>Email address</label>
            <input type="email" id="new_email" ng-model="temp.email.email" class="form-control" placeholder="{{'Email address' | translate}}" />
            <button type="button" class="btn-transparent" ng-click="addItem('email')">
              <icon name="plus" text="Add"></icon>
            </button>
          </div>
        </fieldset>

      </div>

      <div class="form-editable-section" ng-class="{'active': profileForm.$visible}">
        <h3 ng-if="user.voips.length || !profileForm.$visible" translate>Social Networks</h3>
        <ul class="form-list">
          <li class="form-list__item" ng-repeat="voip in user.voips">
            <span class="form-list__text">
              <strong>{{voip.type}}:</strong> {{voip.username}}
            </span>
            <button type="button" class="btn-transparent" ng-show="profileForm.$visible" ng-click="dropItem('voip', voip)"><icon name="cancel" text="Remove"></icon></button>
          </li>
          <li class="form-list__item" ng-if="!user.voips.length && !profileForm.$visible"><em translate>No social networks</em></li>
        </ul>

        <fieldset ng-show="profileForm.$visible">
          <legend translate>Add social network</legend>
          <div class="form-list__item">
            <label for="new_voip_type" class="sr-only">Type</label>
            <div class="styled-select">
              <select id="new_voip_type" ng-model="temp.voip.type" ng-options="t.value as t.name for t in voipTypes" class="form-control">
                <option value="" disabled selected>Type</option>
              </select>
            </div>
          </div>
          <div class="form-list__item">
            <label for="new_voip_username" class="sr-only">Username</label>
            <input type="text" name="username" id="new_voip_username" ng-model="temp.voip.username" class="form-control" placeholder="{{'Username' | translate}}" />
            <button type="button" class="btn-transparent" ng-click="addItem('voip')">
              <icon name="plus" text="Add"></icon>
            </button>
          </div>
        </fieldset>
      </div>

    </div>

    <div class="col-xs-12 col-md-6 col-lg-4">
      <h2 class="block-heading" translate>Role Details</h2>

      <div class="form-editable-section" ng-if="!profileForm.$visible">
        <h3 translate>Organizations</h3>
        <ul class="form-list">
          <li class="form-list__item" ng-repeat="org in user.organizations">
            <a href="/lists/{{org.list._id}}">{{org.list.name}}</a>
            <icon name="star" text="Primary" title="Primary" ng-if="user.organization._id === org._id"></icon>
          </li>
          <li class="form-list__item" ng-if="!user.organizations.length">
            <em translate>No organizations</em>
          </li>
        </ul>
      </div>

      <div class="form-editable-section" ng-if="profileForm.$visible" ng-class="{'active': profileForm.$visible}">
        <fieldset class="form-group" ng-if="user.organizations.length">
          <legend translate>Set primary org:</legend>
          <ul class="form-list">
            <li class="form-list__item" ng-repeat="org in user.organizations">
              <span class="form-list__text">
                <input type="radio"
                  id="org-{{org._id}}"
                  name="organizations"
                  ng-model="user.organization._id"
                  ng-value="org._id"
                  ng-change="setPrimaryOrganization(org)" />
                <label class="clickie-label" for="org-{{org._id}}">{{org.list.name}}</label>
              </span>
              <button type="button" class="btn-transparent" ng-show="org._id !== user.organization._id" ng-click="dropItem('organization', org)"><icon name="cancel" text="Remove organization"></icon></button>
            </li>
          </ul>

        </fieldset>

        <fieldset>
          <legend translate>Add organization</legend>
          <label for="newOrganization" class="sr-only">Add an organization</label>
          <div class="form-list__item">

            <ui-select name="newOrganization" ng-model="temp.organization.list">
              <ui-select-match placeholder="{{'Select an organisation'|translate}}">
                {{$select.selected.name}}
              </ui-select-match>
              <ui-select-choices refresh="getOrganizations($select.search)" repeat="organization in organizations | filter: $select.search track by $index">
                {{organization.name}}
              </ui-select-choices>
            </ui-select>

            <button type="button" class="btn-transparent" ng-click="addItem('organization')">
              <icon name="plus" text="Add"></icon>
            </button>
          </div>
        </fieldset>

      </div>


      <div class="form-editable-section" ng-if="!profileForm.$visible && user.job_titles">
        <h3 translate>Job title</h3>
        <ul class="form-list">
          <li class="form-list__item" ng-repeat="title in user.job_titles">
            {{title}} <icon name="star" title="primary" ng-if="title === user.job_title"></icon>
          </li>
          <li class="form-list__item" ng-if="!user.job_titles.length">
            <em translate>No job title</em>
          </li>
        </ul>
      </div>

      <div class="form-editable-section" ng-class="{'active': profileForm.$visible}" ng-if="profileForm.$visible">

        <fieldset class="form-group" ng-if="user.job_titles.length">
          <legend translate>Set primary job title:</legend>

          <ul class="form-list">
            <li class="form-list__item" ng-repeat="title in user.job_titles">
              <span class="form-list__text">
                <input
                type="radio"
                id="title-{{$index}}"
                name="titles"
                ng-model="user.job_title"
                ng-value="title"
                ng-change="setPrimaryJobTitle(title)"
                />
                <label class="clickie-label" for="title-{{$index}}">
                  {{title}}
                </label>
              </span>
              <button type="button" class="btn-transparent" ng-click="dropItem('job_title', title)" ng-if="title != user.job_title"><icon name="cancel" text="Remove"></icon></button>
            </li>
          </ul>
        </fieldset>
      </div>

      <div class="form-editable-section" ng-if="profileForm.$visible" ng-class="{'active': profileForm.$visible}">
        <label for="job_title">Add a job title</label>
        <div class="form-list__item">
          <input type="text" name="job_title" id="job_title" ng-model="temp.job_title" placeholder="Add a job title" />
          <button type="button" class="btn-transparent" ng-click="addItem('job_title')">
            <icon name="plus" text="Add"></icon>
          </button>
        </div>
      </div>

      <div class="form-editable-section" ng-if="!profileForm.$visible">
        <h3 translate>Locations</h3>
        <ul class="form-list">
          <li class="form-list__item" ng-repeat="location in user.locations">
            <span ng-if="location.region">{{location.region.name}}, </span>{{location.country.name}}
            <icon name="star" text="Primary" title="Primary" ng-if="isPrimaryLocation(location, user.location)"></icon>
          </li>
          <li class="form-list__item" ng-if="!user.location.country"><em translate>No location</em></li>
        </ul>
      </div>

      <div class="form-editable-section active" ng-if="profileForm.$visible">

        <fieldset class="form-group" ng-if="user.job_titles.length">
          <legend translate>Set primary location:</legend>

          <ul class="form-list">
            <li class="form-list__item" ng-repeat="location in user.locations">
              <span class="form-list__text">
                <input type="radio"
                  id="location-{{$index}}"
                  name="locations"
                  ng-model="primaryLocationId"
                  ng-value="getLocationId(location)"
                  ng-change="setPrimaryLocation(location)"
                  />
                <label class="clickie-label" for="location-{{$index}}">
                  <span ng-if="location.region">{{location.region.name}}, </span>{{location.country.name}}
                </label>
              </span>
              <button type="button" class="btn-transparent" ng-click="dropItem('location', location)"
                ng-if="!isPrimaryLocation(location, user.location)">
                <icon name="cancel" text="Remove"></icon>
              </button>
            </li>
          </ul>
        </fieldset>
        <p>Add a location</p>
        <ul class="form-list">
          <li class="form-list__item">
            <ui-select ng-model="temp.location.country" on-select="setRegions($item, $model)">
              <ui-select-match placeholder="{{'Select a country' | translate}}">
                {{$select.selected.name}}
              </ui-select-match>
              <ui-select-choices repeat="country in countries | filter: $select.search track by $index">
                {{country.name}}
              </ui-select-choices>
            </ui-select>
          </li>
          <li class="form-list__item">
            <ui-select ng-model="temp.location.region">
              <ui-select-match placeholder="{{'Select a region' | translate}}">
                {{$select.selected.name}}
              </ui-select-match>
              <ui-select-choices repeat="region in regions | filter: $select.search track by $index">
                {{region.name}}
              </ui-select-choices>
            </ui-select>
          </li>
          <li class="form-list__item">
            <button type="button" class="btn-primary" ng-click="addItem('location')" translate>Add location</button>
          </li>
        </ul>

      </div>

    </div>

    <div class="col-xs-12 col-md-6 col-lg-4">
      <h2 class="block-heading" translate>Additional Information</h2>

      <div class="form-editable-section" ng-class="{'active': profileForm.$visible}" ng-if="currentUser.is_admin || user.roles.length">

        <h3 translate>Roles</h3>

        <ul class="form-list">
          <li class="form-list__item" ng-repeat="role in user.roles">
            {{role.label}}
            <button type="button" class="btn-transparent" ng-click="dropItem('role', role)" ng-if="profileForm.$visible">
              <icon name="cancel" text="Remove"></icon>
            </button>
          </li>
          <li class="form-list__item" ng-if="!user.roles.length">
          <em translate>No roles</em>
          </li>
        </ul>

        <div ng-if="profileForm.$visible && currentUser.is_admin">
          <ui-select name="roles" ng-model="temp.role">
            <ui-select-match placeholder="{{'Select a role' | translate}}">
              {{$select.selected.label}}
            </ui-select-match>
            <ui-select-choices repeat="role in roles | filter: $select.search track by $index">
              {{role.label}}
            </ui-select-choices>
          </ui-select>

          <button type="button" class="btn-transparent" ng-click="addItem('role')">
            <icon name="plus" text="Add"></icon>
          </button>
        </div>

      </div>

      <div class="form-editable-section" ng-show="user.operations && user.operations.length" ng-class="{'active': profileForm.$visible}">
        <h3 translate>Operations</h3>
        <ul class="list-inline list-unstyled">
          <li ng-repeat="(key, val) in user.operations"><a class="label label-default" href="/lists/{{val.list._id}}">{{val.list.name}}</a></li>
        </ul>
      </div>

      <div class="form-editable-section" ng-show="user.bundles && user.bundles.length" ng-class="{'active': profileForm.$visible}">
        <h3 translate>Clusters / Working Groups</h3>
        <ul class="list-inline list-unstyled">
          <li ng-repeat="(key, val) in user.bundles"><a class="label label-default" href="/lists/{{val.list._id}}">{{val.list.name}}</a></li>
        </ul>
      </div>

      <div class="form-editable-section" ng-show="user.disasters && user.disasters.length" ng-class="{'active': profileForm.$visible}">
        <h3 translate>Disasters</h3>
        <ul class="list-inline list-unstyled">
          <li ng-repeat="(key, val) in user.disasters"><a class="label label-default" href="/lists/{{val.list._id}}">{{val.list.name}}</a></li>
        </ul>
      </div>

      <div class="form-editable-section" ng-show="user.lists && user.lists.length" ng-class="{'active': profileForm.$visible}">
        <h3 translate>Other lists</h3>
        <ul class="list-inline list-unstyled">
          <li ng-repeat="(key, val) in user.lists"><a class="label label-default" href="/lists/{{val.list._id}}">{{val.list.name}}</a></li>
        </ul>
      </div>

      <div class="form-editable-section" ng-class="{'active': profileForm.$visible}">

        <h3 translate>Websites</h3>

        <ul class="form-list">
          <li class="form-list__item" ng-repeat="website in user.websites">
            <a ng-href="{{website.url}}">{{website.url}}</a>
            <button type="button" class="btn-transparent" ng-if="profileForm.$visible" ng-click="dropItem('website', website)">
              <icon name="cancel" text="Remove"></icon>
            </button>
          </li>
          <li class="form-list__item" ng-if="!user.websites.length"><em translate>No websites</em></li>
        </ul>

        <div ng-if="profileForm.$visible">
          <label for="newWebsite" translate="">Add website</label>
          <input type="url" ng-model="temp.website.url" id="newWebsite" />
          <button type="button" class="btn-transparent" ng-click="addItem('website')">
            <icon name="plus" text="Add"></icon>
          </button>
        </div>

      </div>

      <div class="form-editable-section" ng-show="user.verified_by" ng-class="{'active': profileForm.$visible}">
        <p><span translate>Verified by</span>: <a href="/users/{{user.verified_by.id}}">{{user.verified_by.name}}</a></p>
      </div>

      <div class="form-editable-section" ng-class="{'active': profileForm.$visible}" ng-if="user.is_admin || currentUser.is_admin">

        <h3 translate>Permissions</h3>

        <span ng-if="user.is_admin && !profileForm.$visible" translate>Administrator</span>
        <span ng-if="!user.is_admin && !profileForm.$visible"><em translate>No permissions set</em></span>

        <div ng-show="profileForm.$visible && currentUser.is_admin">
          <input type="checkbox"
            id="isAdmin"
            ng-model="user.is_admin"
            ng-value="user.is_admin"
            ng-change="saveUser()" />
          <label for="isAdmin" class="clickie-label" translate>Administrator</label>
        </div>
      </div>

      <div class="form-editable-section">
        <h3 translate>Last Updated</h3>
        <span ng-bind="user.updatedAt | date:'longDate'"></span>
        <h3 translate>Created</h3>
        <span ng-bind="user.createdAt | date: 'longDate'"></span>
      </div>

    </div>

  </div>
</form>
