<a id="skip-to-content" href="#main" class="skip-link" translate>Skip to main content</a>

<header role="banner">

  <div class="global-header">
    <div class="container global-header__inner">

      <div class="global-header__back" back-button translate ng-if="isAuthenticated && !hideHeaderFooter">
        <button type="button" class="btn-transparent">
          <icon name="arrow-left" text="back"></icon>
        </button>
      </div>

      <div class="global-header__sites" ng-class="{'global-header__sites--full': !isAuthenticated || hideHeaderFooter}" uib-dropdown>
        <button type="button" class="global-header__sites-btn btn-transparent" uib-dropdown-toggle>
          <span class="global-header__sites-label" translate>Related platforms</span>
          <icon name="arrow-down" text="Change platform" class="global-header__sites-arrow"></icon>
        </button>
        <ul class="dropdown-menu" role="menu" uib-dropdown-menu>
          <li><a href="https://fts.unocha.org">Financial Tracking Service</a></li>
          <li><a href="https://humdata.org">Humanitarian Data Exchange</a></li>
          <li><a href="https://humanitarianresponse.info">HumanitarianResponse.info</a></li>
          <li><a href="https://reliefweb.int">ReliefWeb</a></li>
        </ul>
      </div>

      <div class="global-header__nav" ng-show="isAuthenticated && !hideHeaderFooter">

        <ul class="nav nav--secondary">
          <li class="nav__item nav-item__notifications" ng-if="isAuthenticated && !hideHeaderFooter">
            <a href="/notifications" class="nav__link">
              <icon name="notifications" text="Notifications"></icon>
              <span class="nav__label nav__label--mobile">
                <notifications-count></notifications-count>
              </span>
            </a>
          </li>

          <li class="nav__item" uib-dropdown ng-if="isAuthenticated && !hideHeaderFooter">
            <button type="button" class="nav__link btn btn-transparent" uib-dropdown-toggle>
              <span class="nav__label nav__label--mobile">{{getCurrentLanguage()}}</span>
              <icon name="arrow-down" text="Change language"></icon>
            </button>

            <ul class="dropdown-menu dropdown-menu--lang" role="menu" uib-dropdown-menu>
              <li><a href="#" ng-click="changeLanguage('en')">EN</a></li>
              <li><a href="#" ng-click="changeLanguage('fr')">FR</a></li>
            </ul>
          </li>

          <li class="nav__item" uib-dropdown>
            <button type="button" class="nav__link btn btn-transparent" uib-dropdown-toggle ng-if="isAuthenticated && !hideHeaderFooter">
              <icon name="user"></icon>
              <span class="nav__label">{{currentUser.name}}</span>

              <icon name="arrow-down" text="Open user menu"></icon>
            </button>

            <ul class="dropdown-menu" role="menu" uib-dropdown-menu>
              <li><a href="/users/{{currentUser.id}}" translate>Profile</a></li>
              <li><a href="/settings" translate>Preferences</a></li>
              <li><a href="/tutorial" translate>Tutorial</a></li>
              <li><button type="button" class="btn-link" id="feedback-button" translate>Feedback</button></li>
              <li><a href="/logout" translate>Log out</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <div class="site-header" ng-show="!hideHeaderFooter">
    <div class="container site-header__inner">

      <a href="/" class="site-header__logo" ng-class="{'site-header__logo--loggedout': !isAuthenticated, 'active' : activeNav('/landing')}">
        <span class="sr-only">Humanitarian ID</span>
      </a>

      <div class="site-header__search" ng-if="isAuthenticated">
        <ng-include src="'app/components/search/search-form.html'"></ng-include>
      </div>

      <div uib-dropdown on-toggle="toggled(open)" ng-if="isAuthenticated">

        <nav role="navigation" id="nav" class="site-header__nav dropdown-menu" uib-dropdown-menu aria-labelledby="navToggle" >
          <ul class="nav nav--primary">
            <li class="nav__item" ng-class="{'active' : activeNav('/dashboard')}"><a href="/dashboard" class="nav__link" translate>Dashboard</a></li>
            <li class="nav__item" ng-class="{'active' : activeNav('/search')}"><a href="/search" class="nav__link" translate>Humanitarian contacts</a></li>
            <li class="nav__item" ng-class="{'active' : activeNav('/checkin/{{currentUser.id}}')}" ng-if="isOnline"><a href="/checkin/{{currentUser.id}}" class="nav__link" translate>Check in</a></li>
            <li class="nav__item" ng-class="{'active' : activeNav('/checkout')}"><a href="/checkout" class="nav__link" translate>Check out</a></li>
          </ul>
        </nav>

        <button type="button" id="navToggle" class="site-header__nav-toggle btn btn-transparent" uib-dropdown-toggle>
          <i class="burger-icon"></i>
        </button>

      </div>
    </div>
  </div>
</header>
