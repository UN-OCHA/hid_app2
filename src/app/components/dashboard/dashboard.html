<div class="row">
  <div class="col-xs-12">
    <div class="page-header">
      <h1 class="page-header__heading" translate>Dashboard</h1>
    </div>
  </div>
</div>

<div class="row">

  <div class="col-md-8">

  <h2 class="block-heading" translate>My lists</h2>

    <div class="block tabs tabs--responsive">
      <nav class="tabs-nav">
        <button type="button" 
          class="tabs-nav__button" 
          ng-class="tabClass('favorites')"
          ng-click="toggleTabs('favorites')">
          <span translate>My favorite lists</span>
          <icon name="arrow-down"></icon>
        </button>

        <button type="button" 
          class="tabs-nav__button" 
          ng-click="toggleTabs('partof')"
          ng-class="tabClass('partof')">
          <span translate>Lists I'm part of</span>
          <icon name="arrow-down"></icon>
        </button>

        <button type="button" 
          class="tabs-nav__button" 
           ng-click="toggleTabs('manage')"
           ng-class="tabClass('manage')">
          <span translate>Lists I manage</span>
          <icon name="arrow-down"></icon>
        </button>
      </nav>

      <div class="tabs__section">
        <button type="button" 
          class="tabs-nav__button" 
          ng-class="tabClass('favorites')"
          ng-click="toggleTabs('favorites')">
          <span translate>My favorite lists</span>
          <icon name="arrow-down"></icon>
        </button>

        <div class="tabs__content"
          ng-class="tabClass('favorites')"
          >
          <ul class="list list--has-buttons list--has-dividers">
              <li class="list__item" ng-if="!currentUser.favoriteLists.length" translate>
                You don't have any favorite lists
              </li>
              <li class="list__item" ng-repeat="list in currentUser.favoriteLists track by $index">
                <a href="/lists/{{list._id}}">{{list.name}}</a>
                <div uib-dropdown class="list__button">
                  <button type="button" class="btn-transparent" uib-dropdown-toggle>
                    <icon name="dots" text="Options"></icon>
                  </button>
                  <ul class="dropdown-menu dropdown-menu--small" role="menu" uib-dropdown-menu>
                    <li><button type="button" ng-click="removeFavorite(list)" class="btn-link" translate>Remove from favorites</button></li>
                  </ul>
                </div>
              </li>
            </ul>
        </div>
      </div>

      <div class="tabs__section">
        <button type="button" 
          class="tabs-nav__button" 
          ng-click="toggleTabs('partof')"
          ng-class="tabClass('partof')">
          <span translate>Lists I'm part of</span>
          <icon name="arrow-down"></icon>
        </button>

        <div class="tabs__content"
          ng-class="tabClass('partof')"
          >
          <ul class="list list--has-buttons list--has-dividers">
              <li class="list__item" ng-if="!listsMember.length" translate>
                You are not part of any lists
              </li>
              <li class="list__item" ng-repeat="list in listsMember track by $index">
                <a href="/lists/{{list._id}}">{{list.name}}</a>
                <div uib-dropdown class="list__button">
                  <button type="button" class="btn-transparent" uib-dropdown-toggle>
                    <icon name="dots" text="Options"></icon>
                  </button>
                  <ul class="dropdown-menu dropdown-menu--small" role="menu" uib-dropdown-menu>
                    <li><button type="button" ng-click="leaveList(list)" class="btn-link" translate>Check out of list</button></li>
                  </ul>
                </div>
              </li>
            </ul>
        </div>
      </div>

      <div class="tabs__section">
        <button type="button" 
          class="tabs-nav__button" 
           ng-click="toggleTabs('manage')"
           ng-class="tabClass('manage')">
          <span translate>Lists I manage</span>
          <icon name="arrow-down"></icon>
        </button>

        <div class="tabs__content"
          ng-class="tabClass('manage')"
          >
         <ul class="list list--has-buttons list--has-dividers">
              <li class="list__item" ng-if="!listsOwnedOrManaged.length" translate>
                You don't manage any lists
              </li>
              <li class="list__item" ng-repeat="list in listsOwnedOrManaged track by $index">
                <a href="/lists/{{list._id}}">{{list.name}}</a>
                <div uib-dropdown class="list__button">
                  <button type="button" class="btn-transparent" uib-dropdown-toggle>
                    <icon name="dots" text="Options"></icon>
                  </button>
                  <ul class="dropdown-menu dropdown-menu--small" role="menu" uib-dropdown-menu>
                    <li><a href="/lists/{{list._id}}/edit" translate>Access settings</a></li>
                    <li><button type="button" ng-click="deleteList(list)" class="btn-link" translate>Delete list</button></li>
                  </ul>
                </div>
              </li>
            </ul>
        </div>
      </div>
     
    </div>

  </div>

  <div class="col-md-4">

    <div class="dashboard-ctas">
      <a class="btn-block btn-primary" href="/lists/new" translate>Create new List</a>
    </div>
    <div class="dashboard-ctas" ng-if="currentUser.is_admin">
      <a class="btn-block btn-primary" href="/users/new" translate>Add new user</a>
      <a class="btn-block btn-primary" href="/clients" translate>View OAuth Clients</a>
    </div>

    <div class="secondary-block">
      <h2 class="secondary-block__heading" translate>Subscriptions</h2>

      <ul class="secondary-block__list list list--has-buttons">
        <li class="list__item" ng-repeat="subscription in subscriptions">
          {{subscription.name}}
          <div uib-dropdown class="list__button">
            <button type="button" class="btn-transparent" uib-dropdown-toggle>
              <icon name="dots" text="Options"></icon>
            </button>
            <ul class="dropdown-menu dropdown-menu--small" role="menu" uib-dropdown-menu>
              <li>
                <button type="button" class="btn-link" ng-click="unsubscribe(subscription)" translate>Unsubscribe</button>
              </li>
              <li ng-if="subscription.isOwner || subscription.isManager">
                <a href="services/{{subscription._id}}/edit" translate>Edit Service</a>
              </li>
              <li ng-if="subscription.isOwner">
                <button type="button" class="btn-link" ng-click="deleteService(subscription)" translate>Delete service</button>
              </li>
            </ul>
          </div>
        </li>  
      </ul>

    </div>

  </div>
</div>
